import os
from cryptography.fernet import Fernet

files = []
path = 'C:/Users/thanh quach/projects/python_mini_projects/malware/target'

with open('thekey.key', 'rb') as thekey:
    secret_key = thekey.read()
for file in os.listdir(path):
    files.append(file)

while True:
    question = input('Describe yourself in one word:\n')
    answer = 'amazing'
    if question == answer:
        for file in files:
            with open(f'{path}/{file}', 'rb') as thefile:
                content = thefile.read()
            content_decrypted = Fernet(secret_key).decrypt(content)
            with open(f'{path}/{file}', 'wb') as thefile:
                thefile.write(content_decrypted)
        print('Files are decrypted!')
        break
    else:
        print('Wrong Answer! Try again')